<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Registro Nuevo Alumno</title>

<link rel="stylesheet" href="/style.css">
<link rel="icon" href="/favicon.ico">

<style>
/* ===== ajustes visuales compatibles con tu sistema ===== */

.container{
  max-width: 900px;
  margin: 40px auto;
}

fieldset{
  margin-bottom: 20px;
}

.row{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:15px;
}

.row-3{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap:15px;
}

/* quitar iconos rojo/verde del CURP */
.sin-icono:valid,
.sin-icono:invalid{
  background-image:none !important;
  padding-right:12px !important;
}

button{
  margin-top:15px;
}
</style>
</head>


<body>

<!-- ================= NAVBAR (igual a tus otros html) ================= -->
<nav>
  <div class="nav-logo">
    <img src="/logo.png" alt="Logo">
  </div>

  <div class="nav-links">
    <a href="index.html">Inicio</a>
    <a href="login.html">Iniciar sesi√≥n</a>
  </div>
</nav>


<!-- ================= CONTENIDO ================= -->
<div class="container">

<h2>üìù Registro Nuevo Alumno</h2>


<form id="registroRapido">

<!-- ========================================= -->
<!-- VALIDACI√ìN CURP -->
<!-- ========================================= -->
<fieldset>
<legend>Validaci√≥n por CURP</legend>

<div class="row">
  <input
    id="curpBuscar"
    class="sin-icono"
    placeholder="Ingresa CURP (18 caracteres)"
    maxlength="18"
    required
  >

  <button type="button" onclick="validarCURP()">
    Validar CURP
  </button>
</div>

</fieldset>


<!-- ========================================= -->
<!-- DATOS B√ÅSICOS -->
<!-- ========================================= -->
<fieldset>
<legend>Datos B√°sicos</legend>

<div class="row">

  <input id="nombre" placeholder="Nombre completo" required>

  <input id="correo" type="email" placeholder="Correo">

</div>


<div class="row-3">

  <input id="fecha_nacimiento" type="date" readonly>

  <input id="edad" type="number" placeholder="Edad" readonly>

  <select id="sexo" disabled>
    <option value="">Sexo</option>
    <option value="Masculino">Masculino</option>
    <option value="Femenino">Femenino</option>
  </select>

</div>


<div class="row">

  <select id="turno" required>
    <option value="">Selecciona turno</option>
    <option>Matutino</option>
    <option>Vespertino</option>
  </select>


  <select id="paraescolar" required>
    <option value="">Selecciona paraescolar</option>
    <option>AJEDREZ</option>
    <option>ATLETISMO</option>
    <option>BANDA DE GUERRA</option>
    <option>BASQUETBOL</option>
    <option>DANZA</option>
    <option>ESCOLTA DE BANDERA</option>
    <option>FOTOGRAF√çA</option>
    <option>FUTBOL</option>
    <option>PINTURA</option>
    <option>TEATRO-CANTO</option>
    <option>TOCHO BANDERA</option>
    <option>VOLEIBOL</option>
    <option>ORATORIA Y DECLAMACI√ìN</option>
    <option>M√öSICA</option>
  </select>

</div>

</fieldset>


<button type="submit">Guardar Registro</button>

</form>
</div>



<!-- ===================================================== -->
<!-- ================== SCRIPT ============================ -->
<!-- ===================================================== -->

<script>

// forzar may√∫sculas
curpBuscar.addEventListener("input", ()=>{
  curpBuscar.value = curpBuscar.value.toUpperCase();
});


// ===============================
// VALIDAR CURP
// ===============================
function validarCURP(){

  const curp = curpBuscar.value.trim();

  const regex = /^[A-Z]{4}[0-9]{6}[HM][A-Z]{5}[A-Z0-9]{2}$/;

  if(!regex.test(curp)){
    alert("‚ùå CURP inv√°lida");
    return;
  }

  const datos = extraerDatosCURP(curp);

  fecha_nacimiento.value = datos.fecha;
  edad.value = datos.edad;
  sexo.value = datos.sexo;

  alert("‚úÖ CURP v√°lida. Datos autocompletados");
}


// ===============================
// EXTRAER DATOS DESDE CURP
// ===============================
function extraerDatosCURP(curp){

  const year  = curp.substring(4,6);
  const month = curp.substring(6,8);
  const day   = curp.substring(8,10);
  const sexoChar = curp.charAt(10);

  const currentYear = new Date().getFullYear() % 100;
  const fullYear = year <= currentYear ? "20"+year : "19"+year;

  const fecha = `${fullYear}-${month}-${day}`;

  const hoy = new Date();
  const nacimiento = new Date(fecha);

  let edad = hoy.getFullYear() - nacimiento.getFullYear();

  if(hoy < new Date(hoy.getFullYear(), nacimiento.getMonth(), nacimiento.getDate())){
    edad--;
  }

  return {
    fecha,
    edad,
    sexo: sexoChar === "H" ? "Masculino" : "Femenino"
  };
}


// ===============================
// ENV√çO (luego lo conectamos a tu backend)
// ===============================
registroRapido.addEventListener("submit", e=>{
  e.preventDefault();

  alert("üéâ Registro listo (aqu√≠ conectaremos con backend despu√©s)");
});

</script>

</body>
</html>
